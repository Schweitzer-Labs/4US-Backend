export const genGraphQLProxy = (
  query: string,
  userName: string,
  variables = {}
) => {
  const body = {
    variables,
    operationName: null,
    query,
  };
  const encodedBody = JSON.stringify(body);
  return {
    body: encodedBody,
    ...proxyTemplate(userName),
  };
};

const proxyTemplate = (userName: string) => ({
  resource: "/graphql",
  path: "/graphql",
  httpMethod: "POST",
  headers: {
    Accept: "application/json",
    "Accept-Encoding": "gzip, deflate, br",
    "Accept-Language": "en-US",
    Authorization:
      "eyJraWQiOiJ5MmxCOW5vNis5Qjc5N29rbWF0MU9qaWZEZlNWWkp3R3VMbUozY1RSMm00PSIsImFsZyI6IlJTMjU2In0.eyJhdF9oYXNoIjoiN3RaTEtwODl5T05vUHhpSzNvbWIwdyIsInN1YiI6IjM2ZmNjOTE1LWEzZDItNGJiYS05OTdkLTI4MWM0NjQxOTk3NCIsImF1ZCI6IjI3OHUxdTNtYWhxNnBzYzNiaTg3N2lhYzRkIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImV2ZW50X2lkIjoiMTA1NWY5MjItNTQ1Mi00MzMwLWEwNjAtZTkxOThlYjdlYmU0IiwidG9rZW5fdXNlIjoiaWQiLCJhdXRoX3RpbWUiOjE2MjE5NjY3MDgsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC51cy13ZXN0LTIuYW1hem9uYXdzLmNvbVwvdXMtd2VzdC0yX3lZSGhxSHNJdiIsImNvZ25pdG86dXNlcm5hbWUiOiIzNmZjYzkxNS1hM2QyLTRiYmEtOTk3ZC0yODFjNDY0MTk5NzQiLCJleHAiOjE2MjE5NzAzMDgsImlhdCI6MTYyMTk2NjcwOCwiZW1haWwiOiJkZXYuZXZhbnBpcm9AZ21haWwuY29tIn0.i5dG8VE7Yo0nL52dRhcA7SeQeClI8Hsd5A5yOoGVkRAgaBZSH3sKvDKR_lMg3wkFCQPUB4Flxqf0_FiBA3WoL4WIFJHBlxvxREVqfx5PrxlRM3s97Bq4S0PqbLG7uqvowMRxdtH_LGKdiqKomsGUo8cS9s1eklnXhjv8RDKyztwzj3iCG4_tk5lBAEAS53G5Pz6opFHDxodjD1DflxTPGE_upYHZHf9j1BeZVcTHiEnHIfRx7XBf8RS3d7RaJeSi8IaLww-AjOrT4ByPCffC727UYfXuPvr5F7BArLfISS29e_SbWVSrOFsylJ5OrdYES0gagqtHyh693pw1kI_4xg",
    "CloudFront-Forwarded-Proto": "https",
    "CloudFront-Is-Desktop-Viewer": "true",
    "CloudFront-Is-Mobile-Viewer": "false",
    "CloudFront-Is-SmartTV-Viewer": "false",
    "CloudFront-Is-Tablet-Viewer": "false",
    "CloudFront-Viewer-Country": "US",
    "content-type": "application/json",
    Host: "lhu5xhw0sb.execute-api.us-west-2.amazonaws.com",
    origin: "electron://altair",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "cross-site",
    "User-Agent":
      "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) AltairGraphQLClient/4.0.4 Chrome/89.0.4389.82 Electron/12.0.1 Safari/537.36",
    Via: "2.0 7608da25eb5aed0ce7cca5fc0587c650.cloudfront.net (CloudFront)",
    "X-Amz-Cf-Id": "bRAiKwFaINduWdbhTzz6jkN-ePg3o4sxAobDMVkUqmy0szzGKoWQEg==",
    "X-Amzn-Trace-Id": "Root=1-60ad42fc-24af6d633bbe9e9c3c88c947",
    "X-Forwarded-For": "173.52.219.239, 64.252.183.149",
    "X-Forwarded-Port": "443",
    "X-Forwarded-Proto": "https",
  },
  multiValueHeaders: {
    Accept: ["application/json"],
    "Accept-Encoding": ["gzip, deflate, br"],
    "Accept-Language": ["en-US"],
    Authorization: [
      "eyJraWQiOiJ5MmxCOW5vNis5Qjc5N29rbWF0MU9qaWZEZlNWWkp3R3VMbUozY1RSMm00PSIsImFsZyI6IlJTMjU2In0.eyJhdF9oYXNoIjoiN3RaTEtwODl5T05vUHhpSzNvbWIwdyIsInN1YiI6IjM2ZmNjOTE1LWEzZDItNGJiYS05OTdkLTI4MWM0NjQxOTk3NCIsImF1ZCI6IjI3OHUxdTNtYWhxNnBzYzNiaTg3N2lhYzRkIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImV2ZW50X2lkIjoiMTA1NWY5MjItNTQ1Mi00MzMwLWEwNjAtZTkxOThlYjdlYmU0IiwidG9rZW5fdXNlIjoiaWQiLCJhdXRoX3RpbWUiOjE2MjE5NjY3MDgsImlzcyI6Imh0dHBzOlwvXC9jb2duaXRvLWlkcC51cy13ZXN0LTIuYW1hem9uYXdzLmNvbVwvdXMtd2VzdC0yX3lZSGhxSHNJdiIsImNvZ25pdG86dXNlcm5hbWUiOiIzNmZjYzkxNS1hM2QyLTRiYmEtOTk3ZC0yODFjNDY0MTk5NzQiLCJleHAiOjE2MjE5NzAzMDgsImlhdCI6MTYyMTk2NjcwOCwiZW1haWwiOiJkZXYuZXZhbnBpcm9AZ21haWwuY29tIn0.i5dG8VE7Yo0nL52dRhcA7SeQeClI8Hsd5A5yOoGVkRAgaBZSH3sKvDKR_lMg3wkFCQPUB4Flxqf0_FiBA3WoL4WIFJHBlxvxREVqfx5PrxlRM3s97Bq4S0PqbLG7uqvowMRxdtH_LGKdiqKomsGUo8cS9s1eklnXhjv8RDKyztwzj3iCG4_tk5lBAEAS53G5Pz6opFHDxodjD1DflxTPGE_upYHZHf9j1BeZVcTHiEnHIfRx7XBf8RS3d7RaJeSi8IaLww-AjOrT4ByPCffC727UYfXuPvr5F7BArLfISS29e_SbWVSrOFsylJ5OrdYES0gagqtHyh693pw1kI_4xg",
    ],
    "CloudFront-Forwarded-Proto": ["https"],
    "CloudFront-Is-Desktop-Viewer": ["true"],
    "CloudFront-Is-Mobile-Viewer": ["false"],
    "CloudFront-Is-SmartTV-Viewer": ["false"],
    "CloudFront-Is-Tablet-Viewer": ["false"],
    "CloudFront-Viewer-Country": ["US"],
    "content-type": ["application/json"],
    Host: ["lhu5xhw0sb.execute-api.us-west-2.amazonaws.com"],
    origin: ["electron://altair"],
    "sec-fetch-dest": ["empty"],
    "sec-fetch-mode": ["cors"],
    "sec-fetch-site": ["cross-site"],
    "User-Agent": [
      "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) AltairGraphQLClient/4.0.4 Chrome/89.0.4389.82 Electron/12.0.1 Safari/537.36",
    ],
    Via: ["2.0 7608da25eb5aed0ce7cca5fc0587c650.cloudfront.net (CloudFront)"],
    "X-Amz-Cf-Id": ["bRAiKwFaINduWdbhTzz6jkN-ePg3o4sxAobDMVkUqmy0szzGKoWQEg=="],
    "X-Amzn-Trace-Id": ["Root=1-60ad42fc-24af6d633bbe9e9c3c88c947"],
    "X-Forwarded-For": ["173.52.219.239, 64.252.183.149"],
    "X-Forwarded-Port": ["443"],
    "X-Forwarded-Proto": ["https"],
  },
  queryStringParameters: null,
  multiValueQueryStringParameters: null,
  pathParameters: null,
  stageVariables: null,
  requestContext: {
    resourceId: "igf9bi",
    authorizer: {
      claims: {
        at_hash: "7tZLKp89yONoPxiK3omb0w",
        sub: userName,
        aud: "278u1u3mahq6psc3bi877iac4d",
        email_verified: "true",
        event_id: "1055f922-5452-4330-a060-e9198eb7ebe4",
        token_use: "id",
        auth_time: "1621966708",
        iss: "https://cognito-idp.us-west-2.amazonaws.com/us-west-2_yYHhqHsIv",
        "cognito:username": userName,
        exp: "Tue May 25 19:18:28 UTC 2021",
        iat: "Tue May 25 18:18:28 UTC 2021",
        email: "dev.evanpiro@gmail.com",
      },
    },
    resourcePath: "/graphql",
    httpMethod: "POST",
    extendedRequestId: "f5dncGWsvHcFT2A=",
    requestTime: "25/May/2021:18:33:32 +0000",
    path: "/qa/graphql",
    accountId: "396408709989",
    protocol: "HTTP/1.1",
    stage: "qa",
    domainPrefix: "lhu5xhw0sb",
    requestTimeEpoch: 1621967612375,
    requestId: "10e6be18-aeaf-43e3-8bfe-8fb4ee2d5b09",
    identity: {
      cognitoIdentityPoolId: null,
      accountId: null,
      cognitoIdentityId: null,
      caller: null,
      sourceIp: "173.52.219.239",
      principalOrgId: null,
      accessKey: null,
      cognitoAuthenticationType: null,
      cognitoAuthenticationProvider: null,
      userArn: null,
      userAgent:
        "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) AltairGraphQLClient/4.0.4 Chrome/89.0.4389.82 Electron/12.0.1 Safari/537.36",
      user: null,
    },
    domainName: "lhu5xhw0sb.execute-api.us-west-2.amazonaws.com",
    apiId: "lhu5xhw0sb",
    isBase64Encoded: false,
  },
});
