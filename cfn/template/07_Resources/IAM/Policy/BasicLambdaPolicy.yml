LambdaBasicPolicy:
  Type: AWS::IAM::Policy
  Description: Policy for all Lambdas in {{ DOMAIN }}.{{ TLD }}
  Properties:
    PolicyName: PermissionsToAWSServices
    Roles:
      - !Ref LambdaBasicRole
      - !Ref LambdaDynamoDBRole
      - !Ref LambdaSESRole
    PolicyDocument:
      Version: '2012-10-17'
      Statement:
        - Sid: ParameterStoreParameterAccess
          Effect: Allow
          Action:
            - 'ssm:GetParameter*'
          Resource: !Sub 'arn:aws:ssm:${AWS::Region}:${AWS::AccountId}:*'
        - Sid: VPCNetworkInterfaces
          Effect: Allow
          Resource: '*'
          Action:
            - ec2:CreateNetworkInterface
            - ec2:DescribeNetworkInterfaces
            - ec2:DeleteNetworkInterface
        - Sid: LogEvents
          Effect: Allow
          Resource: '*'
          Action:
            - logs:CreateLogGroup
            - logs:CreateLogStream
            - logs:PutLogEvents
