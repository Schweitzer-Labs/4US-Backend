PolicapitalAnalyticsFunction:
  Type: AWS::Serverless::Function # More info about Function Resource: https://github.com/awslabs/serverless-application-model/blob/master/versions/2016-10-31.md#awsserverlessfunction
  Properties:
    FunctionName: !Sub ${AWS::StackName}-PolicapitalAnalyticsFunction
    Description: Log Analytic data for Policapital Contribution activity
    CodeUri: services/
    Handler: app.policapitalAnalyticsHandler
    Runtime: nodejs12.x
    Role: !Sub ${IAM.Outputs.LambdaBasicRoleArn}
    Events:
      PolicapitalAnalytics:
        Type: Api # More info about API Event Source: https://github.com/awslabs/serverless-application-model/blob/master/versions/2016-10-31.md#api
        Properties:
          Path: /analytics
          Method: post
          RestApiId: !Ref PolicapitalGateway
    Environment:
      Variables:
        RUNENV: !Ref LambdaRunEnvironment
